<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>File Manager</title>
    <script src="js/ls.polyfills.js"></script>
    <script src="js/ls.utils.js"></script>
    <style>
      * > {
        box-sizing: border-box;
        pointer-events: none;
      }
      body {
        background-color: #7e5fe2;
        margin: 0;
        padding: 0;
        width: calc(100% - 32px);
        height: calc(100% - 164px);
        margin: 32px;
        margin-bottom: 200px;
        color: #fff;
      }

      body::-webkit-scrollbar {
        display: none;
      }
      ul,
      ol {
        color: red;
        font-size: 24px;
        /* list-style: none; */
        padding: 0;
        margin: 0;
        padding-left: 150px;
        font-weight: bold;
        vertical-align: top;
      }

      li {
        color: #fff;
      }

      button {
        width: 100%;
        display: inline-block;
        text-align: left;
        -webkit-apperance: none;
        background-color: rgba(0, 0, 0, 0);
        border: 0;
        -webkit-border-radius: 10px;
        margin-bottom: 8px;
        padding: 0x;
        color: #fff;
        margin-left: 46px;
      }

      button img {
        display: inline-block;
        width: 64px;
      }
      button div {
        display: inline-block;
        vertical-align: top;
        margin-left: 32px;
        margin-top: 10px;
        pointer-events: none;
      }

      button:hover {
        margin-left: 0;
        background-color: rgba(0, 0, 0, 0.1);
        padding-top: 16px;
        padding-bottom: 16px;
        padding-left: 16px;
      }

      /* button:hover div {
        background-color: rgba(0, 0, 0, 0.1);
        margin-top: 44px;
      } */
      /* button:hover img {
        width: 160px;
      } */

      button div p {
        margin: 0;
        padding: 0;
      }

      button div p {
        font-size: 32px;
        font-weight: 600;
      }
      button div p + p {
        font-weight: 100;
        font-size: 0px;
        opacity: 0;
      }
      /* button:hover div p + p {
        font-size: 20px;
        opacity: 1;
      } */

      ol {
        list-style: none;
        counter-reset: item;
        margin-right: 32px;
      }

      .context-menu {
        width: 0;
        height: 0;
        -webkit-appearance: none;
        visibility: hidden;
      }

      hr {
        height: 1px;
        border: 0;
        background-color: #fff;
        width: 100%;
        margin-bottom: 32px;
      }

      .ls-dir-loading {
        display: none;
        width: 100%;
        height: 100%;
        background-repeat: no-repeat;
        background-position: 50% 50%;
        position: fixed;
        left: 0;
        top: 0;
        background-color: #fff;
        opacity: 1;
        background-image: url(data:image/gif;base64,R0lGODlhIAAgAPUAAGHF6wSv8KzY6W3I623J62fG67Ha6WvI6wOv8AOu8GXF6q/a6rLa6bLb6mnH6mrI62fH62zI67Pb6mnH67Ha6q7Z6mbG6rDa6bDa6q7a6mTG67La6q3Z6mvJ7AKu8GbG62jH6rTb6rfc6mrH62HE6WvH6qzZ6gOu72XH7GbF6WnG6bXb6WjI7AKv8LDb6rbb6a/a62bH62XG6q/a6a7Z6WjH67Tb6a/Z6WXG6wAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wt4bXAgZGF0YXhtcP8/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG10YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMwNjcgNzkuMTU3NzQ3LCAyMDE1LzAzLzMwLTIzOjQwOjQyICAgICAgICAiPjxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53Lm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZjphYm91dD0iIiD/eG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1uczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0N0Y5QjhGODQzMTExRTU5RDE4RDBCQ0NGQkQ3/0I2RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NDdGOUI5MDg0MzExMUU5RDE4RDBCQ0NGQkQ3QjZFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlST0ieG1wLmlpZDpDMjA1QTExMDg0MkYxMUU1OUQxOEQwQkNDRkJEN0I2RSIgc3RSZWY6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);
      }

      .ls-logo {
        line-height: 63px;
        font-size: 64px;
        font-weight: 100;
        position: fixed;
      }

      /* .main {
        position: absolute;
        width: 4096px;
        -webkit-transform: translateX(-4096px);
      } */
    </style>
  </head>
  <body>
    <div class="ls-logo">
      <a href="localstore.html"
        ><img
          src="img/xmb/localstore-app.png"
          width="120"
          style="vertical-align: top; margin-right: 60px;"
      /></a>
    </div>
    <ol id="ls-dir-output">
      <li>...</li>
    </ol>
    <select class="context-menu" id="context-menu">
      <option value="delete">Delete File</option>
      <option value="resign">Resign PKG</option>
    </select>
    <div class="ls-dir-loading" id="ls-dir-loading"></div>

    <script>
      var lsFileRegexp = /\[(.+?)\]-\[(ALL|US|EU|JP|HK)-(PS1|PS2|PS3|PSN|DEMO|C00|DLC|EDAT|MINI)\]-\[(([A-Z0-9]{6})-([A-Z0-9]{9})_[A-Z0-9]{2}-(.+?))\]-\[0x([0-9A-F]{32})\]/;

      var locales = {
        en: {
          title: "Library Manager",
          actions: "",
          remove: " Delete",
          resign: " Resign",
          install: " Install",
          installRap: " Install RAP in usb000"
        },
        es: {
          title: "Administrador de archivos",
          actions: " Opciones",
          remove: " Eliminar Fichero",
          resign: " ReFirmar Fichero",
          install: " Instalar Fichero",
          installRap: " Install RAP in usb000"
        },
        fr: {
          title: "Gestionnaire de fichiers",
          actions: " Actions de fichier",
          remove: " Supprimer le fichier",
          resign: " Re-signer le fichier",
          install: " Installer le fichier",
          installRap: " Install RAP in usb000"
        }
      };

      var defaultLocale = "en";
      var avaliableLocales = Object.keys(locales);
      var appLocale = navigator.language.substr(0, 2);

      var localeMap =
        locales[
          avaliableLocales.indexOf(appLocale) !== -1 ? appLocale : defaultLocale
        ];

      // document.getElementById('main-title').innerHTML=localeMap["title"];
      function simulateClick(elem) {
        elem.focus();
        var e = document.createEvent("MouseEvents");
        e.initMouseEvent(
          "mousedown",
          true,
          true,
          window,
          0,
          0,
          0,
          0,
          0,
          false,
          false,
          false,
          false,
          0,
          null
        );
        elem.dispatchEvent(e);
      }

      var $ = {
        context: document.getElementById("context-menu"),
        buttons: document.getElementsByTagName("button"),
        dirOutput: document.getElementById("ls-dir-output"),
        loading: document.getElementById("ls-dir-loading")
      };

      $.context.addEventListener("change", function() {
        var targetItem =
          lastFetchResults[parseInt(lastClickElem.getAttribute("index"), 10)];

        switch ($.context.value) {
          case "install":
            var origin = window.location.origin;
            var host =
              "http://" +
              window.location.hostname +
              (window.location.port ? ":" + window.location.port : "");
            alert(
              "http://" +
                targetItem.remoteIp +
                "/install.ps3?url=" +
                host +
                "/pkg?pkg=" +
                targetItem.file
            );
            fetch(
              "http://" +
                targetItem.remoteIp +
                "/install_ps3?url=" +
                host +
                "/pkg?pkg=" +
                targetItem.file
            );
            break;
          case "delete":
            if (targetItem.isSource) {
              fetch(
                "/package-directory?action=delete&file=" + targetItem.file
              ).then(drawResults);
            } else {
              fetch(
                "/package-directory?action=delete&file=" + targetItem.file
              ).then(drawResults);
            }
            break;

          case "resign":
            $.loading.style.display = "block";
            fetch(
              "/package-directory?action=resign&file=" + targetItem.file
            ).then(drawResults);
            break;

          case "installRap":
            var fileResult = targetItem.file.match(lsFileRegexp);
            var contentId = fileResult[4];
            var rap = fileResult[8];
            var origin = window.location.origin;
            var host =
              "http://" +
              window.location.hostname +
              (window.location.port ? ":" + window.location.port : "");
            alert(
              "http://" +
                targetItem.remoteIp +
                "/download.ps3?to=/dev_usb000/exdata&url=" +
                host +
                "/rap?rap=" +
                rap +
                "&contentId=" +
                contentId +
                ";/browser.ps3?" +
                host +
                "/public/file-manager.html"
            );
            fetch(
              "http://" +
                targetItem.remoteIp +
                "/download.ps3?to=/dev_usb000/exdata&url=" +
                host +
                "/rap?rap=" +
                rap +
                "&contentId=" +
                contentId +
                ";/wait.ps3?5;/browser.ps3?" +
                host +
                "/public/file-manager.html"
            );
            break;
        }
      });

      var lastClickElem = null;
      function clickButton(el) {
        lastClickElem = el;
        var targetItem =
          lastFetchResults[parseInt(el.getAttribute("index"), 10)];
        $.context.options.length = 0;
        $.context.options[0] = new Option(
          localeMap["actions"],
          null,
          true,
          false
        );
        $.context.options[1] = new Option(
          localeMap["install"],
          "install",
          true,
          false
        );

        if (targetItem.file) {
          $.context.options[3] = new Option(
            localeMap["resign"],
            "resign",
            false,
            false
          );
        }

        $.context.options[2] = new Option(
          localeMap["remove"],
          "delete",
          false,
          false
        );

        if (targetItem.isSource) {
          $.context.options[3] = new Option(
            localeMap["resign"],
            "resign",
            false,
            false
          );
        }

        var fileResult = targetItem.file.match(lsFileRegexp);
        var contentId = fileResult[4];
        var rap = fileResult[8];
        if (contentId.length > 0 && rap.length === 32) {
          $.context.options[4] = new Option(
            localeMap["installRap"],
            "installRap",
            false,
            false
          );
        }

        console.log("RAP", rap);

        if (targetItem.isSource) {
          $.context.options[3] = new Option(
            localeMap["resign"],
            "resign",
            false,
            false
          );
        }

        simulateClick($.context);
        setTimeout(function() {
          lastClickElem.focus();
        }, 500);
      }

      function drawResults(result) {
        $.loading.style.display = "none";
        result.json().then(function(result) {
          console.log(result);
          lastFetchResults = result;
          var output = result.reduce(function(acc, item, index) {
            acc +=
              "<li>" +
              "<button index=" +
              index +
              ">" +
              '<img src="/image-proxy?productCode=' +
              item.productCode +
              "&compact=true&signed=" +
              (item.isSignedPkg || item.isSignedRap) +
              '"/>' +
              "<div>" +
              '<p class="title" style="' +
              (item.isSignedPkg || item.isSignedRap
                ? "color:rgba(255,255,255,.2);"
                : "") +
              '">' +
              item.name +
              "</p>" +
              '<p class="subtitle">' +
              (item.isSignedPkg ? " ۞ Signed | " : "") +
              (item.isSignedRap ? " ۞ RAP Signed |" : "") +
              item.productCode +
              " | " +
              item.region +
              " | " +
              item.type +
              "</p>" +
              "</div>" +
              "</button>" +
              "</li>";

            return acc;
          }, "");

          $.dirOutput.innerHTML = output;
          Array.prototype.slice.call($.buttons).forEach(function(button) {
            button.addEventListener("click", function() {
              clickButton(button);
            });
          });
        });
      }

      var lastFetchResults = null;
      fetch("/package-directory?action=list").then(drawResults);
      // window.resizeTo(200, 200);
    </script>
  </body>
</html>
